# MyPy Configuration for LFA Intern System
# =========================================
#
# This configuration is INTENTIONALLY NOT ENABLED in CI/CD yet.
# First, fix critical P4 issues (syntax errors, bare excepts), then gradually enable type checking.
#
# To run mypy manually:
#   mypy app/
#
# To run on specific module:
#   mypy app/api/
#
# Status: TEMPLATE ONLY - NOT ENFORCED YET
# Date: 2026-01-18

[mypy]
python_version = 3.11
warn_return_any = True
warn_unused_configs = True
warn_redundant_casts = True
warn_unused_ignores = True

# Start with lenient settings - gradually tighten
disallow_untyped_defs = False
disallow_incomplete_defs = False
disallow_untyped_calls = False
check_untyped_defs = True

# Allow missing imports initially (many 3rd party libs don't have stubs)
ignore_missing_imports = True

# Show error codes for easier suppression
show_error_codes = True
show_column_numbers = True

# Don't fail on first error
no_implicit_optional = False

# Files to exclude
exclude = (?x)(
    ^venv/
    | ^\.venv/
    | ^build/
    | ^dist/
    | ^\.eggs/
    | ^__pycache__/
    | ^\.pytest_cache/
    | ^\.mypy_cache/
    | ^\.ruff_cache/
    | ^alembic/
    | ^implementation/
  )

# =========================================
# GRADUAL STRICTNESS - ENABLE AS CODE IMPROVES
# =========================================

# Phase 1: Enable for new API modules (after P4 cleanup)
# [mypy-app.api.api_v1.endpoints.motivation]
# disallow_untyped_defs = True

# [mypy-app.api.api_v1.endpoints.projects.*]
# disallow_untyped_defs = True

# Phase 2: Enable for service layer (critical business logic)
# [mypy-app.services.quiz_service]
# disallow_untyped_defs = True
# disallow_incomplete_defs = True

# [mypy-app.services.enrollment_conflict_service]
# disallow_untyped_defs = True

# Phase 3: Enable for models (data integrity)
# [mypy-app.models.*]
# disallow_untyped_defs = True
# disallow_any_generics = True

# =========================================
# FUTURE GOALS (6+ months)
# =========================================
# - 50%+ function coverage with type hints
# - disallow_untyped_defs = True globally
# - disallow_incomplete_defs = True globally
# - no_implicit_optional = True
# - strict = True (for critical modules)

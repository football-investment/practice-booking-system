{% extends "base.html" %}

{% block title %}Achievements - LFA Education Center{% endblock %}

{% block content %}
<div class="welcome-section">
    <h1>ğŸ† Achievements</h1>
    <p>Track your progress and unlock rewards</p>
</div>

<!-- Stats Overview -->
<div class="cards-grid" style="grid-template-columns: repeat(4, 1fr);">
    <div class="card text-center">
        <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ†</div>
        <h3>{{ unlocked_count }}</h3>
        <p style="color: #7f8c8d;">Unlocked</p>
    </div>

    <div class="card text-center">
        <div style="font-size: 2rem; margin-bottom: 0.5rem;">âš¡</div>
        <h3>{{ total_xp }}</h3>
        <p style="color: #7f8c8d;">Total XP</p>
    </div>

    <div class="card text-center">
        <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ“Š</div>
        <h3>{{ total_achievements }}</h3>
        <p style="color: #7f8c8d;">Total Available</p>
    </div>

    <div class="card text-center">
        <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ¯</div>
        <h3>{{ completion_rate }}%</h3>
        <p style="color: #7f8c8d;">Completion</p>
    </div>
</div>

<!-- Recent Achievements -->
{% if recent_achievements %}
<div class="mt-3">
    <h2>ğŸŒŸ Recently Unlocked</h2>
    <div class="cards-grid mt-2">
        {% for achievement in recent_achievements %}
        <div class="card achievement-card unlocked">
            <div class="achievement-icon">{{ achievement.icon or 'ğŸ†' }}</div>
            <h3>{{ achievement.name }}</h3>
            <p style="color: #7f8c8d;">{{ achievement.description }}</p>
            <div style="margin-top: 1rem;">
                <span class="badge badge-success">âœ“ Unlocked</span>
                <span class="badge badge-warning">{{ achievement.xp_reward }} XP</span>
            </div>
            <p style="font-size: 0.85rem; color: #95a5a6; margin-top: 0.5rem;">
                {{ achievement.earned_at.strftime('%b %d, %Y') if achievement.earned_at else '' }}
            </p>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- All Achievements -->
<div class="mt-3">
    <h2>All Achievements</h2>

    {% if not all_achievements %}
    <div class="card text-center" style="padding: 3rem;">
        <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ†</div>
        <h3>No Achievements Yet</h3>
        <p style="color: #7f8c8d;">Complete activities to unlock achievements and earn XP</p>
    </div>
    {% else %}
    <div class="achievement-grid mt-2">
        {% for achievement in all_achievements %}
        <div class="card achievement-card {{ 'unlocked' if achievement.unlocked else 'locked' }}">
            <div class="achievement-icon">{{ achievement.icon or 'ğŸ†' }}</div>
            <h3>{{ achievement.name }}</h3>
            <p style="color: #7f8c8d;">{{ achievement.description or 'No description' }}</p>

            {% if achievement.category %}
            <p style="font-size: 0.85rem; color: #95a5a6; margin-top: 0.5rem;">
                Category: {{ achievement.category.title() }}
            </p>
            {% endif %}

            <div style="margin-top: 1rem;">
                {% if achievement.unlocked %}
                    <span class="badge badge-success">âœ“ Unlocked</span>
                    <span class="badge badge-warning">{{ achievement.xp_reward or 0 }} XP</span>
                {% else %}
                    <span class="badge" style="background-color: #95a5a6; color: white;">ğŸ”’ Locked</span>
                    <span class="badge badge-warning">{{ achievement.xp_reward or 0 }} XP</span>
                {% endif %}
            </div>

            {% if achievement.unlocked and achievement.earned_at %}
            <p style="font-size: 0.85rem; color: #95a5a6; margin-top: 0.5rem;">
                Earned: {{ achievement.earned_at.strftime('%b %d, %Y') }}
            </p>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% endif %}
</div>

<style>
.achievement-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1.5rem;
}

.achievement-card {
    text-align: center;
    transition: all 0.3s ease;
}

.achievement-card.unlocked {
    border: 2px solid var(--success-color);
}

.achievement-card.locked {
    opacity: 0.6;
    border: 2px solid #95a5a6;
}

.achievement-card.locked .achievement-icon {
    filter: grayscale(100%);
}

.achievement-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
}

.achievement-card h3 {
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
    color: var(--primary-color);
}
</style>
{% endblock %}

"""
Auto-generated smoke tests for spec_info domain
Generated by tools/generate_api_tests.py

⚠️  DO NOT EDIT MANUALLY - Regenerate using:
    python tools/generate_api_tests.py --scan-api app/api --output tests/integration/api_smoke/
"""

import pytest
from fastapi.testclient import TestClient


class TestSpecinfoSmoke:
    """Smoke tests for spec_info API endpoints"""


    # ── GET /age-eligibility ────────────────────────────

    def test_check_age_eligibility_happy_path(self, api_client: TestClient, admin_token: str):
        """
        Happy path: GET /age-eligibility
        Source: app/api/api_v1/endpoints/spec_info.py:check_age_eligibility
        """
        headers = {"Authorization": f"Bearer {admin_token}"}

        
        response = api_client.get("/age-eligibility", headers=headers)
        

        # Accept 200, 201, 404 (if resource doesn't exist in test DB)
        assert response.status_code in [200, 201, 404], (
            f"GET /age-eligibility failed: {response.status_code} "
            f"{response.text}"
        )

    def test_check_age_eligibility_auth_required(self, api_client: TestClient):
        """
        Auth validation: GET /age-eligibility requires authentication
        """
        
        response = api_client.get("/age-eligibility")
        

        # Should return 401 Unauthorized or 403 Forbidden
        assert response.status_code in [401, 403], (
            f"GET /age-eligibility should require auth: {response.status_code}"
        )

    def test_check_can_book_session_happy_path(self, api_client: TestClient, admin_token: str):
        """
        Happy path: GET /can-book/{session_id}
        Source: app/api/api_v1/endpoints/spec_info.py:check_can_book_session
        """
        headers = {"Authorization": f"Bearer {admin_token}"}

        
        response = api_client.get("/can-book/{session_id}", headers=headers)
        

        # Accept 200, 201, 404 (if resource doesn't exist in test DB)
        assert response.status_code in [200, 201, 404], (
            f"GET /can-book/{session_id} failed: {response.status_code} "
            f"{response.text}"
        )

    def test_check_can_book_session_auth_required(self, api_client: TestClient):
        """
        Auth validation: GET /can-book/{session_id} requires authentication
        """
        
        response = api_client.get("/can-book/{session_id}")
        

        # Should return 401 Unauthorized or 403 Forbidden
        assert response.status_code in [401, 403], (
            f"GET /can-book/{session_id} should require auth: {response.status_code}"
        )

    def test_get_enrollment_requirements_for_user_happy_path(self, api_client: TestClient, admin_token: str):
        """
        Happy path: GET /enrollment-requirements
        Source: app/api/api_v1/endpoints/spec_info.py:get_enrollment_requirements_for_user
        """
        headers = {"Authorization": f"Bearer {admin_token}"}

        
        response = api_client.get("/enrollment-requirements", headers=headers)
        

        # Accept 200, 201, 404 (if resource doesn't exist in test DB)
        assert response.status_code in [200, 201, 404], (
            f"GET /enrollment-requirements failed: {response.status_code} "
            f"{response.text}"
        )

    def test_get_enrollment_requirements_for_user_auth_required(self, api_client: TestClient):
        """
        Auth validation: GET /enrollment-requirements requires authentication
        """
        
        response = api_client.get("/enrollment-requirements")
        

        # Should return 401 Unauthorized or 403 Forbidden
        assert response.status_code in [401, 403], (
            f"GET /enrollment-requirements should require auth: {response.status_code}"
        )

    def test_get_progression_for_license_happy_path(self, api_client: TestClient, admin_token: str):
        """
        Happy path: GET /progression/{license_id}
        Source: app/api/api_v1/endpoints/spec_info.py:get_progression_for_license
        """
        headers = {"Authorization": f"Bearer {admin_token}"}

        
        response = api_client.get("/progression/{license_id}", headers=headers)
        

        # Accept 200, 201, 404 (if resource doesn't exist in test DB)
        assert response.status_code in [200, 201, 404], (
            f"GET /progression/{license_id} failed: {response.status_code} "
            f"{response.text}"
        )

    def test_get_progression_for_license_auth_required(self, api_client: TestClient):
        """
        Auth validation: GET /progression/{license_id} requires authentication
        """
        
        response = api_client.get("/progression/{license_id}")
        

        # Should return 401 Unauthorized or 403 Forbidden
        assert response.status_code in [401, 403], (
            f"GET /progression/{license_id} should require auth: {response.status_code}"
        )

    def test_list_specialization_types_happy_path(self, api_client: TestClient, admin_token: str):
        """
        Happy path: GET /specialization-types
        Source: app/api/api_v1/endpoints/spec_info.py:list_specialization_types
        """
        headers = {"Authorization": f"Bearer {admin_token}"}

        
        response = api_client.get("/specialization-types", headers=headers)
        

        # Accept 200, 201, 404 (if resource doesn't exist in test DB)
        assert response.status_code in [200, 201, 404], (
            f"GET /specialization-types failed: {response.status_code} "
            f"{response.text}"
        )

    def test_list_specialization_types_auth_required(self, api_client: TestClient):
        """
        Auth validation: GET /specialization-types requires authentication
        """
        
        response = api_client.get("/specialization-types")
        

        # Should return 401 Unauthorized or 403 Forbidden
        assert response.status_code in [401, 403], (
            f"GET /specialization-types should require auth: {response.status_code}"
        )

